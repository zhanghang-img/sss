<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>注册</title>
		<link rel="stylesheet" type="text/css" href="css/register.css">
		<link rel="stylesheet" type="text/css" href="css/iconfont.css"/>
	</head>
	<body>
		<!-- 顶部  wrap -->

		<div id="wrap">
			<p>欢迎光临New Balance中国官方商城，新客注册即送350元礼券，新老客下单即享全场包邮！因技术原因微信支付暂时无法使用，给您带来不便敬请谅解！</p>
		</div>

		<!-- 头部  herder -->
		<div class="header">
			<!-- 导航 nav -->
			<div class="nav">
				<ul class="	qq">
					<div class="logo">
						<a href="#"><img src="img/logo.jpg" width="66px" height="45px"></a>
					</div>
					<li class="nav-a1"><a href="#"><b>男子</b></a>
						<div class="nav-nth">
							<div class="nav-abc">
								<ul class="nav-box">
									<li><a href="#"><b>鞋子</b></a></li>
									<li><a href="#">休闲</a></li>
									<li><a href="#">英美产系列</a></li>
									<li><a href="#">老爹鞋</a></li>
									<li><a href="#">男款跑步鞋</a></li>
									<li><a href="#">中性款</a></li>
									<li><a href="#">男款 凉鞋/拖鞋</a></li>
									<li><a href="#">篮球鞋</a></li>
									<li><a href="#">板鞋</a></li>
									<br>
									<li><a href="#"><b>查看所有 鞋子</b></a></li>
								</ul>

								<ul>
									<li><a href="#"><b>服饰/配饰</b></a></li>
									<li><a href="#">T恤/背心</a></li>
									<li><a href="#">短裤</a></li>
									<li><a href="#">休闲裤装</a></li>
									<li><a href="#">运动上衣</a></li>
									<li><a href="#">配件/装备</a></li>
									<li><a href="#">运动裤装</a></li>
									<li><a href="#">外套/夹克</a></li>
									<li><a href="#">套头卫衣</a></li>
									<li><a href="#">羽绒服/棉服/马甲</a></li>
									<li><a href="#"><b>查看所有 服装/配饰</b></a></li>
								</ul>

								<ul>
									<li><a href="#"><b>专题推荐</b></a></li>
									<li><a href="#"><b>男款新品上市</b></a></li>
									<li><a href="#"><b>热销推荐</b></a></li>
									<li><a href="#"><b>尖货发售</b></a></li>
									<li><a href="#"><b>利物浦系列</b></a></li>
									<li><a href="#"><b>纽约马拉松</b></a></li>
								</ul>

								<ul class="nav-img">
									<li>
										<a href="#">
											<img src="img/b1.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;850系列</p>
										</a>
									</li>
									<li>
										<a href="#">
											<img src="img/b2.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新款男子跑鞋</p>
										</a>
									</li>
									<li>
										<a href="#">
											<img src="img/b3.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;男子服饰</p>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</li>
					<li class="nav-a1"><a href="#"><b>女子</b></a>
						<div class="nav-nth">
							<div class="nav-abc">
								<ul class="nav-box-2">
									<li><a href="#"><b>鞋子</b></a></li>
									<li><a href="#">休闲</a></li>
									<li><a href="#">老爹鞋</a></li>
									<li><a href="#">英美产系列</a></li>
									<li><a href="#">女款跑步鞋</a></li>
									<li><a href="#">训练</a></li>
									<li><a href="#">中性款</a></li>
									<li><a href="#">女款 凉鞋/拖鞋</a></li>
									<li><a href="#">板鞋</a></li>
									<br>
									<li><a href="#"><b>查看所有 鞋子</b></a></li>
								</ul>

								<ul>
									<li><a href="#"><b>服饰/配饰</b></a></li>
									<li><a href="#">T恤/背心/连衣裙</a></li>
									<li><a href="#">短裤/短裙</a></li>
									<li><a href="#">套头卫衣</a></li>
									<li><a href="#">休闲裤装</a></li>
									<li><a href="#">运动上衣</a></li>
									<li><a href="#">运动裤装</a></li>
									<li><a href="#">运动内衣</a></li>
									<li><a href="#">配件/装备</a></li>
									<li><a href="#">外套/夹克</a></li>
									<li><a href="#">羽绒服/棉服/马甲</a></li>
									<br>
									<li><a href="#"><b>查看所有 服装/配饰</b></a></li>
								</ul>

								<ul>
									<li><a href="#"><b>专题推荐</b></a></li>
									<li><a href="#"><b>女款新品上市</b></a></li>
									<li><a href="#"><b>热销推荐</b></a></li>
									<li><a href="#"><b>尖货发售</b></a></li>
									<li><a href="#"><b>利物浦系列</b></a></li>
									<li><a href="#"><b>纽约马拉松</b></a></li>
								</ul>

								<ul class="nav-img">
									<li>
										<a href="#">
											<img src="img/n1.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;850系列</p>
										</a>
									</li>
									<li>
										<a href="#">
											<img src="img/n2.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新款女子跑鞋</p>
										</a>
									</li>
									<li>
										<a href="#">
											<img src="img/n3.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;女子服饰</p>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</li>
					<li class="nav-a1"><a href="#"><b>男孩</b></a>
						<div class="nav-nth">
							<div class="nav-abc">
								<ul class="nav-box-3">
									<li><a href="#"><b>鞋子</b></a></li>
									<li><a href="#">休闲</a></li>
									<li><a href="#">跑步</a></li>
									<li><a href="#">凉鞋</a></li>
									<li><a href="#">小童(0-4岁)</a></li>
									<li><a href="#">中童(4-7)</a></li>
									<li><a href="#">大童(7-14)</a></li>
									<br>
									<li><a href="#"><b>查看所有 鞋子</b></a></li>
								</ul>
								<ul class="nav-img">
									<li>
										<a href="#">
											<img src="img/nh1.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;小童(0-4岁)</p>
										</a>
									</li>
									<li>
										<a href="#">
											<img src="img/nh2.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;中童(4-7)</p>
										</a>
									</li>
									<li>
										<a href="#">
											<img src="img/nh3.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;大童(7-14)</p>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</li>
					<li class="nav-a1"><a href="#"><b>女孩</b></a>
						<div class="nav-nth">
							<div class="nav-abc">
								<ul class="nav-box-4">
									<li><a href="#"><b>鞋子</b></a></li>
									<li><a href="#">休闲</a></li>
									<li><a href="#">跑步</a></li>
									<li><a href="#">凉鞋</a></li>
									<li><a href="#">小童(0-4岁)</a></li>
									<li><a href="#">中童(4-7)</a></li>
									<li><a href="#">大童(7-14)</a></li>
									<br>
									<li><a href="#"><b>查看所有 鞋子</b></a></li>
								</ul>
								<ul class="nav-img">
									<li>
										<a href="#">
											<img src="img/nh1.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;小童(0-4岁)</p>
										</a>
									</li>
									<li>
										<a href="#">
											<img src="img/nh4.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;中童(4-7)</p>
										</a>
									</li>
									<li>
										<a href="#">
											<img src="img/nh5.jpg">
											<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;大童(7-14)</p>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</li>
				</ul>

			</div>
			<!-- 搜索 search -->
			<div class="search">
				<div class="search-box">
					<input type="text" placeholder="搜索">
					<a href="#"><span class="iconfont icon-fangdajing"></span></a>
				</div>
			</div>

			<!-- 登录 enter -->
			<div class="enter">
				<div class="enter-box">
					<a href="#"><span class="iconfont icon-denglu"></span></a>
					<a href="#">登录</a>/
					<a href="#">注册</a>

				</div>
				<div class="enter-btn">
					<a href="#">
						<spam class="iconfont icon-gouwuche"><a href="#">您的购物车是空的</a></spam>
					</a>
				</div>
			</div>
		</div>

		<!-- 登录 -->
		<div class="dlyh">
			<p>注册新的账户</p>
		</div>
		<div class="rst">
			<div class="rst-box">
				<h2>注册账户</h2>
				&nbsp;&nbsp;&nbsp;用户名：&nbsp;&nbsp;&nbsp;<input id="userId" type="text" value="aaa22bb" placeholder="长度在6-18位；由数字，字母下划线" ><span></span><br />
				&nbsp;&nbsp;&nbsp;密码：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="passId" type="password"  value="aaa222_"><span></span><br />
				<div id="pass-box"> <span></span><span></span><span></span></div>
				&nbsp;&nbsp;&nbsp;确认密码：<input id="pass2Id" type="password" value="aaa222_"><span></span><br />
				&nbsp;&nbsp;&nbsp;性别：<input class="box" name="sex" type="radio" value="女" checked>女
				<input class="box" name="sex" type="radio" value="男">男
				<br />
				<input id="btnReg" type="button" value="注册"><br />
				<div id="message-box">
				
				</div>
				
			</div>
		</div>

		<div class="button">
			<ul class="button-box">
				<li>
					<a href="#">
						<img src="img/c1.png" alt="">
						<span>查找店铺</span>
					</a>
				</li>
				<li>
					<a href="#">
						<img src="img/c2.png" alt="">
						<span>订阅资讯</span>
					</a>
				</li>
			</ul>
		</div>
		<!-- tag -->
		<div class="tag">
			<div class="tag-box">
				<ul>
					<span>帮助中心</span>
					<li>&nbsp;</li>
					<li>&nbsp;</li>
					<li><a href="#">购买须知</a></li>
					<li><a href="#">配送及费用</a></li>
					<li><a href="#">支付方式</a></li>
					<li><a href="#">退货政策</a></li>
				</ul>
				<ul>
					<span>我的订单</span>
					<li>&nbsp;</li>
					<li>&nbsp;</li>
					<li><a href="#">订单查询</a></li>
					<li><a href="#">关于发票</a></li>
				</ul>
				<ul>
					<span>关于NB</span>
					<li>&nbsp;</li>
					<li>&nbsp;</li>
					<li><a href="#">品牌故事</a></li>
					<li><a href="#">隐私政策</a></li>
					<li></li>
					<li><a href="#">Responsible Lesdership</a></li>
				</ul>
				<ul>
					<span>保持联系</span>
					<li>&nbsp;</li>
					<li>&nbsp;</li>
					<li>
						<a href="#"><img src="img/c3.png" width="37px" height="37px"></a>
						<a href="#"><img src="img/c4.png" width="37px" height="37px"></a>
					</li>
					<li>客服热线：</li>
					<li>800-820-2887(请使用固话拨打)</li>
					<li>400-890-2887(请使用手机拨打)</li>
					<li>电话服务时间：周一~周五</li>
					<li>9AM~6PM(节假日除外)</li>
					<li>在线服务时间：</li>
					<li>周一~周日</li>
					<li>9AM~10PM</li>
				</ul>
			</div>
		</div>

		<!-- 最后的  out -->
		<div class="out">
			<span>2019@New Balance<a href="#">泸ICP备10207056号</a></span>
			<a href="#"><img src="img/d2.png">泸公网安备31010502001622号</a>
			<p>银百伦贸易(中国)有限公司 上海市静安区南京西路688号广场6楼</p>
		</div>
		<!-- 广告  gg -->
		<div class="gg">
			<img src="img/gg.png" width="39px" height="200px">
		</div>
	</body>
</html>
<script src="js/jquery-3.2.1.min.js"></script>
<script>
   let isCheck = {
       user: false,
       pass: false,
       pass2: false
   };
   let hasUser = true; //后端是否存在该用户名
   $(function () {
       $("#userId").blur(function () {
           // 1、前端的验证（格式）
           if (checkUserFront()) {
               // 2、后端验证（存在性）
               checkUserBack();
           }
       });
       // 密码验证
       $("#passId").blur(function () {
           checkPass();
       })
   
       $("#passId").change(function () {
           $("#pass2Id").val("");
           $("#pass2Id").next().html("");
       })
   
       // 确认密码验证
       $("#pass2Id").blur(function () {
           checkPass2();
       });
   
       // 注册
       $("#btnReg").click(function () {
           let trueCount = 0;
           for (let key in isCheck) {
               if (isCheck[key]) { trueCount++; }
           }
           console.log("trueCount", trueCount);
   
           // 保证前端验证没有问题
           if (trueCount == 3) {
               if (!hasUser) {
                   regSave();
                   return;
               }
           }
           alert("亲，请检查您的信息是否输入完整或者是否正确");
       });
   });
   
   
   function checkUserFront() {
       let userIdDom = $("#userId");
       // 用户名的规则：非空，长度在6-18位；由数字，字母下划线；
       let reg = /^\w{6,18}$/;
       if (reg.test(userIdDom.val())) {
           isCheck.user = true;
           return true;
       } else {
           userIdDom.next().html("×,亲，用户名规则：长度在6-18位；由数字，字母下划线");
           isCheck.user = false;
           return false;
       }
   }
   
   function checkUserBack() {
       
       $.get("php/checkUser.php", { "username": $("#userId").val() }, (result) => {
           if (result == "1") {
               $("#userId").next().css("color","red").html("该用户名已经存在");
               hasUser = true;
           } else {
               $("#userId").next().css("color","green").html("用户名没有人使用，赶紧注册吧！");
               hasUser = false;
           }
       });
   }
   
   function checkPass() {
       let passDom = $("#passId");
       let passSpan = $("#pass-box").children();
       passSpan.css("backgroundColor","white");
   
       // 密码的规则：长度在6-18位，数字字母下划线组成
       let reg = /^\w{6,18}$/;
       if (reg.test(passDom.val())) {
           passDom.next().html("√");
           isCheck.pass = true;
   
           //1、统计字符类型的个数
           let regLetter = /[a-zA-Z]/;
           let regNum = /[0-9]/;  //数字
           let regLine = /[_]/;  //划线
           count = 0;
           if (regLetter.test(passDom.val())) {
               count++;
           }
           if (regNum.test(passDom.val())) {
               count++;
           }
           if (regLine.test(passDom.val())) {
               count++;
           }
           switch (count) {
               // 强：三种字符
               case 3: passSpan[2].style.backgroundColor = "green";
               // 中：两种字符
               case 2: passSpan[1].style.backgroundColor = "yellow";
               // 弱：一种字符
               case 1: passSpan[0].style.backgroundColor = "red";
               default: ;
           }
       } else {
           isCheck.pass = false;
           passDom.next().html("×");
       }
   }
   
   function checkPass2() {
       let pass2Dom = $("#pass2Id");
       if (pass2Dom.val() === $("#passId").val()) {
           isCheck.pass2 = true;
           pass2Dom.next().html("√");
       } else {
           isCheck.pass2 = false;
           pass2Dom.next().html("×");
       }
   }
   
   function regSave() {
       let sexDoms = $(":input[name=sex]");
       let sex = "女";
       if (sexDoms[1].checked) {
           sex = "男";
       }
   
       let str = `username=${$("#userId").value}&userpass=${$("#passId").value}&usersex=${sex}`;
       $.post(
           "php/regSave.php",
           {
               "username":$("#userId").val(),
               "userpass":$("#passId").val(),
               "usersex":sex
           },
           (result) => {
               if (result == "1") {
                   $("#message-box").html("恭喜您，注册成功！请<a href='demo09login.html'>登录</a>");
               } else {
                   $("#message-box").html("不好意思，注册失败！");
               }
           }
       );
   }
    

</script>